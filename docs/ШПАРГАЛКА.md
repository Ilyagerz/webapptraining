# üìù –®–ü–ê–†–ì–ê–õ–ö–ê - –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è

## üöÄ –î–ï–ü–õ–û–ô (–æ–¥–Ω–∞ –∫–æ–º–∞–Ω–¥–∞)

```bash
cd ~/webapptraining && bash DEPLOY_COMMANDS.sh
```

---

## üîÑ –ü–ï–†–ï–ó–ê–ü–£–°–ö

```bash
pm2 restart all
```

---

## üìä –°–¢–ê–¢–£–°

```bash
pm2 status
```

---

## üìã –õ–û–ì–ò

```bash
# –í—Å–µ –ª–æ–≥–∏
pm2 logs

# –¢–æ–ª—å–∫–æ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥
pm2 logs nubo-training-frontend

# –¢–æ–ª—å–∫–æ –±—ç–∫–µ–Ω–¥
pm2 logs nubo-training-backend

# –ü–æ—Å–ª–µ–¥–Ω–∏–µ 50 —Å—Ç—Ä–æ–∫
pm2 logs --lines 50

# –í—ã—Ö–æ–¥: Ctrl+C
```

---

## üîç –ü–†–û–í–ï–†–ö–ê –ü–û–†–¢–û–í

```bash
netstat -tulpn | grep -E ':(3000|3001)'
```

–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:
```
tcp  0.0.0.0:3000  LISTEN  node
tcp  0.0.0.0:3001  LISTEN  node
```

---

## üåê NGINX

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥–∞
nginx -t

# –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞
systemctl reload nginx

# –°—Ç–∞—Ç—É—Å
systemctl status nginx

# –õ–æ–≥–∏ –æ—à–∏–±–æ–∫
tail -50 /var/log/nginx/nubotraining-error.log
```

---

## üõ†Ô∏è –ü–ï–†–ï–°–ë–û–†–ö–ê

```bash
cd ~/webapptraining
pm2 stop all
rm -rf .next
NODE_ENV=production npm run build
pm2 restart all
```

---

## üßπ –ü–û–õ–ù–ê–Ø –û–ß–ò–°–¢–ö–ê

```bash
cd ~/webapptraining
pm2 delete all
rm -rf node_modules .next package-lock.json
npm cache clean --force
npm install
NODE_ENV=production npm run build
pm2 start ecosystem.config.js
pm2 save
```

---

## üì• –û–ë–ù–û–í–õ–ï–ù–ò–ï –ö–û–î–ê

### –ß–µ—Ä–µ–∑ Git:
```bash
cd ~/webapptraining
pm2 stop all
git pull
npm install
NODE_ENV=production npm run build
pm2 restart all
```

### –ß–µ—Ä–µ–∑ rsync (—Å Mac):
```bash
# –ó–∞–ø—É—Å—Ç–∏ –Ω–∞ Mac:
rsync -avz --exclude 'node_modules' --exclude '.next' \
  /Users/ilagorelockin/Desktop/webapptraining/ \
  root@—Ç–≤–æ–π_IP:/root/webapptraining/

# –ü–æ—Ç–æ–º –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:
cd ~/webapptraining
pm2 stop all
npm install
NODE_ENV=production npm run build
pm2 restart all
```

---

## üÜò –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê (–æ–¥–Ω–∞ –∫–æ–º–∞–Ω–¥–∞)

```bash
cd ~/webapptraining && \
echo "=== PM2 ===" && pm2 status && \
echo -e "\n=== –ü–û–†–¢–´ ===" && netstat -tulpn | grep -E ':(3000|3001)' && \
echo -e "\n=== BUILD ===" && cat .next/BUILD_ID 2>&1 && \
echo -e "\n=== –õ–û–ì–ò –§–†–û–ù–¢–ï–ù–î ===" && pm2 logs nubo-training-frontend --lines 20 --nostream && \
echo -e "\n=== –õ–û–ì–ò –ë–≠–ö–ï–ù–î ===" && pm2 logs nubo-training-backend --lines 20 --nostream
```

–°–∫–æ–ø–∏—Ä—É–π –≤–µ—Å—å –≤—ã–≤–æ–¥ –∏ –æ—Ç–ø—Ä–∞–≤—å –º–Ω–µ!

---

## ‚ö° –ë–´–°–¢–†–´–ï –§–ò–ö–°–´

### 502 Bad Gateway:
```bash
pm2 restart all && systemctl reload nginx
```

### –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–∞–¥–∞–µ—Ç:
```bash
pm2 logs nubo-training-frontend --lines 100
```

### –ü–æ—Ä—Ç –∑–∞–Ω—è—Ç:
```bash
pkill -9 node
pm2 start ecosystem.config.js
```

### –û—à–∏–±–∫–∞ –±–∏–ª–¥–∞:
```bash
rm -rf .next
NODE_ENV=production npm run build
```

---

## üìç –í–ê–ñ–ù–´–ï –ü–£–¢–ò

```
–ü—Ä–æ–µ–∫—Ç:           ~/webapptraining
–õ–æ–≥–∏ PM2:         ~/.pm2/logs/
–ö–æ–Ω—Ñ–∏–≥ Nginx:     /etc/nginx/sites-available/training.nubofit.ru
–õ–æ–≥–∏ Nginx:       /var/log/nginx/nubotraining-error.log
SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã:  /etc/letsencrypt/live/training.nubofit.ru/
```

---

## üéØ –ü–†–û–í–ï–†–ö–ê –†–ê–ë–û–¢–´

```bash
# 1. PM2 —Å—Ç–∞—Ç—É—Å (–æ–±–∞ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å online)
pm2 status

# 2. –ü–æ—Ä—Ç—ã (–¥–æ–ª–∂–Ω—ã —Å–ª—É—à–∞—Ç—å—Å—è 3000 –∏ 3001)
netstat -tulpn | grep -E ':(3000|3001)'

# 3. Nginx (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å active)
systemctl status nginx

# 4. –û—Ç–∫—Ä–æ–π –≤ –±—Ä–∞—É–∑–µ—Ä–µ
# https://training.nubofit.ru
```

---

## üíæ –°–û–•–†–ê–ù–ï–ù–ò–ï –°–û–°–¢–û–Ø–ù–ò–Ø PM2

```bash
# –ü–æ—Å–ª–µ –ª—é–±—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ PM2
pm2 save

# –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–µ —Å–µ—Ä–≤–µ—Ä–∞
pm2 startup
pm2 save
```

---

## üîê SSL –°–ï–†–¢–ò–§–ò–ö–ê–¢

```bash
# –ü—Ä–æ–¥–ª–µ–Ω–∏–µ (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
certbot renew

# –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –ø—Ä–æ–¥–ª–µ–Ω–∏–µ
certbot renew --force-renewal

# –ü–æ—Å–ª–µ –ø—Ä–æ–¥–ª–µ–Ω–∏—è
systemctl reload nginx
```

---

## üìû –ü–û–ú–û–©–¨

–ï—Å–ª–∏ –∑–∞—Å—Ç—Ä—è–ª - –∑–∞–ø—É—Å—Ç–∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É –∏ –æ—Ç–ø—Ä–∞–≤—å –º–Ω–µ:
```bash
cd ~/webapptraining && \
echo "=== PM2 ===" && pm2 status && \
echo -e "\n=== –ü–û–†–¢–´ ===" && netstat -tulpn | grep -E ':(3000|3001)' && \
echo -e "\n=== –õ–û–ì–ò ===" && pm2 logs --lines 50 --nostream
```

---

## ‚úÖ –í–°–ï –†–ê–ë–û–¢–ê–ï–¢ –ï–°–õ–ò:

- PM2: –æ–±–∞ –ø—Ä–æ—Ü–µ—Å—Å–∞ `online`, `‚Ü∫ 0`
- –ü–æ—Ä—Ç—ã: 3000 –∏ 3001 —Å–ª—É—à–∞—é—Ç—Å—è
- Nginx: `active (running)`
- –°–∞–π—Ç: –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –±–µ–∑ 502
- –ú–æ–∂–Ω–æ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –∏ –≤–æ–π—Ç–∏

**–ì–æ—Ç–æ–≤–æ! üéâ**

