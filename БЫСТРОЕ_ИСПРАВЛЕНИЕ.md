# 🚨 БЫСТРОЕ ИСПРАВЛЕНИЕ - 5 дефолтных упражнений

## Проблема:
Отображаются только 5 упражнений вместо 107.

---

## ✅ РЕШЕНИЕ (выполните на сервере по порядку):

```bash
# 1. Перейдите в проект
cd ~/webapptraining

# 2. ПРИНУДИТЕЛЬНО обновите с GitHub (сбросит локальные изменения)
git fetch origin
git reset --hard origin/main

# 3. ПРОВЕРЬТЕ что файл появился
ls -lh data/custom-exercises.json
# Должно быть: -rw-r--r-- 1 root root 116K ...

# 4. ПРОВЕРЬТЕ количество упражнений
cat data/custom-exercises.json | grep '"id"' | wc -l
# Должно быть: 107

# 5. ПОЛНОСТЬЮ ОЧИСТИТЕ Next.js кэш
rm -rf .next
rm -rf node_modules/.cache

# 6. ПЕРЕСОБЕРИТЕ
npm run build 2>&1 | tail -30
# Ждите "✓ Compiled successfully"

# 7. ПОЛНОСТЬЮ ПЕРЕЗАПУСТИТЕ pm2
pm2 delete all
pm2 start ecosystem.config.js
# ИЛИ если нет ecosystem.config.js:
# pm2 start npm --name "nubo" -- start

# 8. ПРОВЕРЬТЕ логи
pm2 logs --lines 30

# 9. ПРОВЕРЬТЕ API (ВАЖНО!)
curl http://localhost:3000/api/exercises/translated 2>&1 | head -200
```

---

## 📊 Что должно получиться:

### После шага 3:
```bash
$ ls -lh data/custom-exercises.json
-rw-r--r-- 1 root root 116K Oct 19 21:46 data/custom-exercises.json
```

### После шага 4:
```bash
$ cat data/custom-exercises.json | grep '"id"' | wc -l
107
```

### После шага 9 (API должен вернуть JSON):
```json
[
  {
    "id": "DhMl549",
    "name": "Barbell full squat (back pov)",
    "nameEn": "barbell full squat (back pov)",
    "category": "strength",
    "muscleGroup": "Ноги",
    ...
```

**Если видите ошибку вместо JSON - есть проблема!**

---

## 🔍 ЕСЛИ НЕ ПОМОГЛО:

### Проверьте что в логах:
```bash
pm2 logs --err --lines 50
```

### Проверьте что Next.js видит файл:
```bash
node -e "
const fs = require('fs');
const path = require('path');
const file = path.join(process.cwd(), 'data', 'custom-exercises.json');
console.log('File exists:', fs.existsSync(file));
if (fs.existsSync(file)) {
  const data = JSON.parse(fs.readFileSync(file, 'utf-8'));
  console.log('Exercises count:', data.length);
}
"
```

### Проверьте права доступа:
```bash
chmod 644 data/custom-exercises.json
ls -la data/custom-exercises.json
```

---

## 💡 Альтернативное решение:

Если ничего не помогает, проверьте что API endpoint правильный:

```bash
cd ~/webapptraining

# Проверьте содержимое route.ts
cat app/api/exercises/translated/route.ts

# Должно быть:
# const filePath = join(process.cwd(), 'data', 'custom-exercises.json');
```

---

## 🚀 После исправления:

1. Откройте приложение
2. Очистите кэш браузера (Cmd+Shift+R)
3. Перейдите "Начать тренировку" → "Добавить упражнение"
4. Выберите "Грудь" → должно быть **12 упражнений**!

---

## 📞 Пришлите результаты команд:

```bash
# 1. Размер файла
ls -lh data/custom-exercises.json

# 2. Количество
cat data/custom-exercises.json | grep '"id"' | wc -l

# 3. API ответ (первые 50 строк)
curl http://localhost:3000/api/exercises/translated 2>&1 | head -50

# 4. Логи pm2
pm2 logs --err --lines 20
```

