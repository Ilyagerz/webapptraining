# üö® –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –û–®–ò–ë–ö–ê - API 404

## –ü—Ä–æ–±–ª–µ–º–∞:
```
GET https://training.nubofit.ru/api/exercises/translated 404 (Not Found)
```

**API endpoint –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –Ω–∞ production —Å–µ—Ä–≤–µ—Ä–µ!**

–≠—Ç–æ –ù–ï –ø—Ä–æ–±–ª–µ–º–∞ –∫—ç—à–∞ - Next.js –Ω–µ —Å–æ–∑–¥–∞–ª API route –ø—Ä–∏ –±–∏–ª–¥–µ.

---

## ‚úÖ –†–ï–®–ï–ù–ò–ï (–≤—ã–ø–æ–ª–Ω–∏—Ç–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ):

### –®–∞–≥ 1: –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

```bash
cd ~/webapptraining

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ API route —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ .next
ls -la .next/server/app/api/exercises/translated/

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤—Å–µ API routes
find .next/server/app/api -type f -name "*.js" | grep -E "(exercises|translated)"

# –ï—Å–ª–∏ —Ñ–∞–π–ª–æ–≤ –ù–ï–¢ - —ç—Ç–æ –ø—Ä–æ–±–ª–µ–º–∞!
```

---

### –®–∞–≥ 2: –ü–æ–ª–Ω–∞—è –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∞

```bash
cd ~/webapptraining

# 1. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
pm2 stop all

# 2. –ü–û–õ–ù–û–°–¢–¨–Æ –æ—á–∏—Å—Ç–∏—Ç–µ –∫—ç—à–∏
rm -rf .next
rm -rf node_modules/.cache
rm -rf .vercel

# 3. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ —Ñ–∞–π–ª —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
ls -lh data/custom-exercises.json
# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: 116K

# 4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ API route —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ –∏—Å—Ö–æ–¥–Ω–∏–∫–∞—Ö
ls -la app/api/exercises/translated/route.ts
cat app/api/exercises/translated/route.ts | head -20

# 5. –ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ —Å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º
npm run build 2>&1 | tee build.log

# 6. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –±–∏–ª–¥ —É—Å–ø–µ—à–µ–Ω
tail -30 build.log

# 7. –í–ê–ñ–ù–û: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ API route —Å–æ–∑–¥–∞–ª—Å—è
ls -la .next/server/app/api/exercises/translated/
# –î–æ–ª–∂–Ω—ã –±—ã—Ç—å —Ñ–∞–π–ª—ã: route.js, route.js.nft.json –∏ —Ç.–¥.

# 8. –ï—Å–ª–∏ —Ñ–∞–π–ª–æ–≤ –ù–ï–¢ - –ø—Ä–æ–±–ª–µ–º–∞ —Å –±–∏–ª–¥–æ–º!
```

---

### –®–∞–≥ 3: –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π

```bash
cd ~/webapptraining

# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∏ —É–¥–∞–ª–∏—Ç–µ —Å—Ç–∞—Ä—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã
pm2 delete all

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∑–∞–Ω–æ–≤–æ
pm2 start npm --name "nubo-training" -- start

# –ò–ª–∏ –µ—Å–ª–∏ –µ—Å—Ç—å ecosystem.config.js:
pm2 start ecosystem.config.js

# –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
pm2 save

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å
pm2 status
pm2 logs nubo-training --lines 50
```

---

### –®–∞–≥ 4: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –ü–æ–¥–æ–∂–¥–∏—Ç–µ 10 —Å–µ–∫—É–Ω–¥ –ø–æ—Å–ª–µ pm2 restart

# –¢–µ—Å—Ç 1: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ API –æ—Ç–≤–µ—á–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ
curl http://localhost:3000/api/exercises/translated | head -100

# –¢–µ—Å—Ç 2: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ
curl http://localhost:3000/api/exercises/translated 2>/dev/null | grep -o '"id"' | wc -l
# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: 107

# –¢–µ—Å—Ç 3: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á–µ—Ä–µ–∑ –ø—É–±–ª–∏—á–Ω—ã–π URL
curl https://training.nubofit.ru/api/exercises/translated | head -100
```

---

## üîç –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã 404:

### 1. API route –Ω–µ —Å–æ–∑–¥–∞–ª—Å—è –ø—Ä–∏ –±–∏–ª–¥–µ

**–°–∏–º–ø—Ç–æ–º**: `ls .next/server/app/api/exercises/translated/` ‚Üí –ø–∞–ø–∫–∞ –ø—É—Å—Ç–∞—è –∏–ª–∏ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç

**–†–µ—à–µ–Ω–∏–µ**:
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –∏—Å—Ö–æ–¥–Ω—ã–π —Ñ–∞–π–ª —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
cat app/api/exercises/translated/route.ts

# –ï—Å–ª–∏ —Ñ–∞–π–ª–∞ –ù–ï–¢ - –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –µ–≥–æ
git checkout app/api/exercises/translated/route.ts

# –ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ
rm -rf .next && npm run build
```

---

### 2. Next.js –Ω–µ –≤–∫–ª—é—á–∏–ª API –≤ production –±–∏–ª–¥

**–°–∏–º–ø—Ç–æ–º**: –í build.log –Ω–µ—Ç —É–ø–æ–º–∏–Ω–∞–Ω–∏—è `/api/exercises/translated`

**–†–µ—à–µ–Ω–∏–µ**: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `next.config.js` - –≤–æ–∑–º–æ–∂–Ω–æ API routes –∏—Å–∫–ª—é—á–µ–Ω—ã –∏–∑ –±–∏–ª–¥–∞

---

### 3. PM2 –∑–∞–ø—É—Å—Ç–∏–ª –Ω–µ —Ç—É –≤–µ—Ä—Å–∏—é

**–°–∏–º–ø—Ç–æ–º**: `pm2 logs` –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç–∞—Ä—ã–µ –ª–æ–≥–∏ –∏–ª–∏ –æ—à–∏–±–∫–∏

**–†–µ—à–µ–Ω–∏–µ**:
```bash
# –ü–æ–ª–Ω–æ—Å—Ç—å—é —É–¥–∞–ª–∏—Ç–µ —Å—Ç–∞—Ä—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã
pm2 delete all
pm2 kill

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∑–∞–Ω–æ–≤–æ
cd ~/webapptraining
pm2 start npm --name "nubo-training" -- start
pm2 save
```

---

### 4. –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ—Ä—Ç –∏–ª–∏ –ø—Ä–æ–∫—Å–∏

**–°–∏–º–ø—Ç–æ–º**: API —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ `localhost:3000`, –Ω–æ –Ω–µ –Ω–∞ `training.nubofit.ru`

**–†–µ—à–µ–Ω–∏–µ**: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ nginx/proxy –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ nginx –∫–æ–Ω—Ñ–∏–≥
sudo nginx -t
sudo cat /etc/nginx/sites-available/training.nubofit.ru

# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å —á—Ç–æ-—Ç–æ —Ç–∏–ø–∞:
# location /api/ {
#   proxy_pass http://localhost:3000/api/;
# }
```

---

## üìä –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

### –í —Ç–µ—Ä–º–∏–Ω–∞–ª–µ —Å–µ—Ä–≤–µ—Ä–∞:

```bash
# 1. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ .next –¥–æ–ª–∂–Ω–∞ –≤–∫–ª—é—á–∞—Ç—å API
ls -la .next/server/app/api/exercises/translated/

# 2. –õ–æ–∫–∞–ª—å–Ω—ã–π API —Ä–∞–±–æ—Ç–∞–µ—Ç
curl http://localhost:3000/api/exercises/translated | python3 -m json.tool | head -50

# 3. –ü—É–±–ª–∏—á–Ω—ã–π API —Ä–∞–±–æ—Ç–∞–µ—Ç
curl https://training.nubofit.ru/api/exercises/translated | python3 -m json.tool | head -50

# 4. PM2 –ø—Ä–æ—Ü–µ—Å—Å –∑–∞–ø—É—â–µ–Ω
pm2 status
pm2 logs --lines 20 --nostream
```

### –í –±—Ä–∞—É–∑–µ—Ä–µ (DevTools Console):

```javascript
// –î–æ–ª–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å 107
fetch('https://training.nubofit.ru/api/exercises/translated')
  .then(r => r.json())
  .then(data => console.log('–£–ø—Ä–∞–∂–Ω–µ–Ω–∏–π:', data.length))
```

---

## üö® –ï—Å–ª–∏ –Ω–µ –ø–æ–º–æ–≥–ª–æ:

### –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∫–æ–º–∞–Ω–¥:

```bash
# 1. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ .next
ls -R .next/server/app/api/ | head -50

# 2. –ë–∏–ª–¥ –ª–æ–≥
tail -100 build.log

# 3. PM2 –ª–æ–≥–∏
pm2 logs --lines 100 --nostream

# 4. Nginx –∫–æ–Ω—Ñ–∏–≥ (–µ—Å–ª–∏ –µ—Å—Ç—å)
sudo cat /etc/nginx/sites-available/training.nubofit.ru

# 5. –õ–æ–∫–∞–ª—å–Ω—ã–π —Ç–µ—Å—Ç API
curl http://localhost:3000/api/exercises/translated 2>&1 | head -50

# 6. –ü—É–±–ª–∏—á–Ω—ã–π —Ç–µ—Å—Ç API  
curl https://training.nubofit.ru/api/exercises/translated 2>&1 | head -50
```

---

## üí° –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ: Redeploy

–ï—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –ø–æ–º–æ–≥–∞–µ—Ç:

```bash
cd ~/webapptraining

# 1. –°–¥–µ–ª–∞–π—Ç–µ –±—ç–∫–∞–ø –¥–∞–Ω–Ω—ã—Ö
cp -r data data.backup
cp -r public/exercises public.backup

# 2. –ü–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–∫–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
cd ~
mv webapptraining webapptraining.old
git clone https://github.com/ilyagerz/webapptraining.git
cd webapptraining

# 3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
npm install

# 4. –°–æ–±–µ—Ä–∏—Ç–µ
npm run build

# 5. –ó–∞–ø—É—Å—Ç–∏—Ç–µ
pm2 start npm --name "nubo-training" -- start
pm2 save
```

---

## üéØ –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:

–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤ –±—Ä–∞—É–∑–µ—Ä–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:
- ‚úÖ API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 200 (–Ω–µ 404!)
- ‚úÖ –í Console: "‚úÖ –ó–∞–≥—Ä—É–∂–µ–Ω–æ 107 —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–π"
- ‚úÖ –í —Å–ø–∏—Å–∫–µ "–ì—Ä—É–¥—å": 12 —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–π
- ‚úÖ –í—Å–µ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è —Å GIF –∞–Ω–∏–º–∞—Ü–∏—è–º–∏

